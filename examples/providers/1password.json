{
  "id": "onepassword",
  "type": "external",
  "external": {
    "get": {
      "cmd": "op read \"op://Private/{{key}}/password\"",
      "output": "{{output}}"
    },
    "set": {
      "cmd": "op item create --category Login --title {{key}} password={{value}} --vault Private"
    },
    "delete": {
      "cmd": "op item delete {{key}} --vault Private"
    },
    "list": {
      "cmd": "op item list --vault Private --format json",
      "output": "{{ map(fromJSON(output), {.title}) | join(\"\\n\") }}"
    },
    "exists": {
      "cmd": "op item get {{key}} --vault Private"
    },
    "metadata": {
      "cmd": "op account list",
      "output": "Account: {{output}}"
    },
    "environment": {
      "OP_SERVICE_ACCOUNT_TOKEN": "$OP_SERVICE_ACCOUNT_TOKEN"
    },
    "timeout": "30s"
  }
}